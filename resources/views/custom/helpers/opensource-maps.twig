
<script type="text/javascript">
    window.addEventListener('DOMContentLoaded', function() {
        (function($) {
            $(document).ready(function(){
                
                {% if latitude and longitude %}
                    var mymap  = L.map("{{element|default('map_canvas')}}", {preferCanvas: true}).setView(['{{latitude}}', '{{longitude}}'], 15);

                    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
                        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                        maxZoom: 18,
                        id: 'mapbox/streets-v11',
                        tileSize: 512,
                        zoomOffset: -1,
                        accessToken: 'pk.eyJ1IjoiZ2FicmllbGluZm9yY2UiLCJhIjoiY2szb292Nnl1MWo2NjNjbjNncDE3YTYyMiJ9.uGJaYdyBzUqPM711YhW_Yg'
                    }).addTo(mymap);

                    L.circle(['{{latitude}}', '{{longitude}}'], {
                        color: '{{cor}}',
                        fillColor: '{{cor}}',
                        fillOpacity: 0.5,
                            radius: 200
                    }).addTo(mymap);
                {% endif %}
            });
        })(jQuery);
    });
</script>